1
00:00:00,500 --> 00:00:03,620
如你所见 推送在很多情况下都非常有用

2
00:00:03,620 --> 00:00:05,960
特别是当你需要实时更新

3
00:00:05,960 --> 00:00:07,700
并希望节省电池耗电时

4
00:00:07,700 --> 00:00:10,370
那么设置它的第一步是什么？

5
00:00:10,368 --> 00:00:13,689
推送的设置实际上较为复杂

6
00:00:13,689 --> 00:00:15,320
首先 服务器需要一种方法来跟踪

7
00:00:15,320 --> 00:00:18,379
其知道的不同的客户端设备

8
00:00:18,379 --> 00:00:20,899
它还需要能够在任何情况下发送消息

9
00:00:20,899 --> 00:00:23,958
即使手机暂时断开连接 或

10
00:00:23,960 --> 00:00:25,550
发送消息时手机关机

11
00:00:25,550 --> 00:00:27,140
在客户端方面 手机需要

12
00:00:27,140 --> 00:00:29,359
知道如何从服务器接收消息

13
00:00:29,359 --> 00:00:32,320
并处理消息包含的信息

14
00:00:32,320 --> 00:00:34,820
你可能想知道你是否需要从头编写所有

15
00:00:34,820 --> 00:00:36,079
这些代码

16
00:00:36,079 --> 00:00:36,829
你猜怎么着？

17
00:00:36,829 --> 00:00:38,118
不需要

18
00:00:38,118 --> 00:00:40,848
Google 提供一项叫作 Firebase Cloud Messaging

19
00:00:40,850 --> 00:00:46,010
（简称 FCM）的服务 可以简化推送

20
00:00:46,009 --> 00:00:47,929
FCM 由两部分组成

21
00:00:47,929 --> 00:00:50,728
第一部分是 FCM 服务器

22
00:00:50,728 --> 00:00:53,058
FCM 服务器管理并发送消息

23
00:00:53,060 --> 00:00:54,929
到你的客户端设备

24
00:00:54,929 --> 00:00:59,210
第二部分是 Android 客户端 FCM 消息传递库

25
00:00:59,210 --> 00:01:01,740
该库允许你从客户端应用上的

26
00:01:01,740 --> 00:01:04,069
FCM 服务器接收消息

27
00:01:04,069 --> 00:01:07,670
通过使用 FCM 服务器和关联的客户端库

28
00:01:07,670 --> 00:01:10,250
你可以免费获得以下功能

29
00:01:10,250 --> 00:01:12,379
你可以免费获得自动重试

30
00:01:12,379 --> 00:01:15,209
FCM 会知道消息是否已成功发送

31
00:01:15,209 --> 00:01:18,439
如果没有 将重试发送消息

32
00:01:18,438 --> 00:01:21,699
你还能够将消息发送到手机组

33
00:01:21,700 --> 00:01:23,210
FCM 具有两种不同的内置方式

34
00:01:23,209 --> 00:01:25,429
来将消息发送到多个设备

35
00:01:25,430 --> 00:01:26,990
我稍后会讲

36
00:01:26,989 --> 00:01:29,000
FCM 还可以跨平台使用

37
00:01:29,000 --> 00:01:32,120 
它适用于 iOS、Android 和 Web

38
00:01:32,120 --> 00:01:34,410
最后 FCM 具有扩展性

39
00:01:34,409 --> 00:01:38,200
FCM 可以快速向大量用户传递消息

40
00:01:38,200 --> 00:01:42,259
95％ 的消息能在 250 毫秒或更短的时间内传送

41
00:01:42,259 --> 00:01:44,549
记住这一点 我们来看看 Squawker 应用的代码

42
00:01:44,549 --> 00:01:46,310
和功能目前是什么样的

43
00:01:46,310 --> 00:01:50,350
以便我们确定添加 FCM 的位置和方式

