1
00:00:00,060 --> 00:00:02,770
有了基本视图和 AdapterView 后

2
00:00:02,770 --> 00:00:05,279
现在我们来探索测试 Intent

3
00:00:05,280 --> 00:00:08,150
你可能经常听过的关于 Intent 测试的两个术语

4
00:00:08,150 --> 00:00:11,160
Intent Stub 和 Intent Verification

5
00:00:11,160 --> 00:00:12,480
但它们是什么意思呢？

6
00:00:12,480 --> 00:00:15,000
Intent Stub 是一小段代码

7
00:00:15,000 --> 00:00:19,199
作为测试期间对 Intent 调用的假响应

8
00:00:19,199 --> 00:00:21,059
使用 Stub 的好处在于

9
00:00:21,059 --> 00:00:22,979
它能给我们一致的结果

10
00:00:22,980 --> 00:00:25,019
从而使我们一次专注于测试

11
00:00:25,019 --> 00:00:26,710
一个操作

12
00:00:26,710 --> 00:00:28,650
我们通过一个例子说明一下

13
00:00:28,649 --> 00:00:30,664
我们假设一个发短信的应用

14
00:00:30,664 --> 00:00:32,789
它可以使用户从手机上的联系人列表中

15
00:00:32,789 --> 00:00:34,229
选择一个电话号码

16
00:00:34,229 --> 00:00:37,049
那么应用会向联系人列表发送一个 Intent

17
00:00:37,049 --> 00:00:39,015
并期望返回一个电话号码

18
00:00:39,015 --> 00:00:40,890
然后 用户可以使用所选择的电话号码

19
00:00:40,890 --> 00:00:42,299
来给他们的朋友发短信

20
00:00:42,299 --> 00:00:44,369
现在 应用开发人员想测试

21
00:00:44,369 --> 00:00:46,329
消息传递接口

22
00:00:46,329 --> 00:00:50,000
由于此测试一次只能测试一个操作

23
00:00:50,000 --> 00:00:52,229
联络和从联系人列表中获取信息

24
00:00:52,229 --> 00:00:55,140
的代码应分开测试

25
00:00:55,140 --> 00:00:57,480
这意味着她需要通过一种方法隔离测试

26
00:00:57,479 --> 00:01:00,659
所以它实际并不涉及启动联系人列表

27
00:01:00,659 --> 00:01:04,060
而是让她之后继续操作

28
00:01:04,060 --> 00:01:06,379
而 Intent Stub 就在这里派上用场了

29
00:01:06,379 --> 00:01:09,869
那么要测试 她通过传递一个假的电话号码来 stub

30
00:01:09,870 --> 00:01:10,650
Intent

31
00:01:10,650 --> 00:01:13,240
这样做意味着在测试期间 我们不需要

32
00:01:13,239 --> 00:01:15,449
实际打开联系人列表 Activity

33
00:01:15,450 --> 00:01:17,939
而是将假号码传递到消息传递

34
00:01:17,939 --> 00:01:20,879
屏幕 然后开发人员可以继续测试消息传递

35
00:01:20,879 --> 00:01:21,959
接口

36
00:01:21,959 --> 00:01:24,089
所以如此情况所示

37
00:01:24,090 --> 00:01:28,740
我们使用 Stub 或预先写好的答案来进行测试

38
00:01:28,739 --> 00:01:31,709
这样做的好处是我们会获得一致的结果

39
00:01:31,709 --> 00:01:33,629
并允许我们一次只专注于测试

40
00:01:33,629 --> 00:01:35,219
一个操作

41
00:01:35,219 --> 00:01:39,439
所以 Intent Stub 有助于测试 Intent 响应

42
00:01:39,439 --> 00:01:42,959
在 Espresso 中 要 stub Intent 我们使用此方法

43
00:01:42,959 --> 00:01:44,519
它取参数 Matcher 对象

44
00:01:44,519 --> 00:01:47,700
来帮助我们匹配感兴趣的 Intent

45
00:01:47,700 --> 00:01:50,820
这类似于 View Matcher 帮助我们匹配

46
00:01:50,819 --> 00:01:52,389
感兴趣的视图

47
00:01:52,390 --> 00:01:55,079
我们稍后通过一个例子看看

48
00:01:55,079 --> 00:01:56,170
如何实际使用它

49
00:01:56,170 --> 00:01:58,799
另一方面 Intent Verification

50
00:01:58,799 --> 00:02:00,709
帮助我们检查如果我们发送

51
00:02:00,709 --> 00:02:03,509
一个 Intent 我们在 Intent 中发送的信息

52
00:02:03,510 --> 00:02:05,180
是我们真正要发的信息

53
00:02:05,180 --> 00:02:07,030
那么再来拜访一下我们那个测试消息传递

54
00:02:07,030 --> 00:02:09,180
应用的开发人员朋友

55
00:02:09,180 --> 00:02:11,909
在第二个测试中 她想测试应用中的

56
00:02:11,909 --> 00:02:13,229
主叫功能

57
00:02:13,229 --> 00:02:15,149
用户可以使用联系人的电话号码

58
00:02:15,150 --> 00:02:16,539
呼叫他们的朋友

59
00:02:16,539 --> 00:02:18,794
在消息应用中 我们使用 Intent

60
00:02:18,794 --> 00:02:21,000
来打开设备的手机应用

61
00:02:21,000 --> 00:02:23,199
然后拨出电话号码

62
00:02:23,199 --> 00:02:26,019
在 Intent 我们传递 Intent Action

63
00:02:26,020 --> 00:02:28,800
（即呼叫）、Intent Data（即

64
00:02:28,800 --> 00:02:31,620
手机号） 以及最后一个是包

65
00:02:31,620 --> 00:02:35,340
在测试时 开发人员可以使用 Intent Verification

66
00:02:35,340 --> 00:02:36,960
来确保意图发送的信息

67
00:02:36,960 --> 00:02:40,409
正是实际发送的信息

68
00:02:40,409 --> 00:02:42,909
那么在 Espresso 中 要验证 Intent

69
00:02:42,909 --> 00:02:45,460
我们使用方法 intended

70
00:02:45,460 --> 00:02:49,200
顾名思义 我们要验证我们的意图

71
00:02:49,199 --> 00:02:51,329
被正确理解了

72
00:02:51,330 --> 00:02:54,680
为帮助你巩固这两个新概念：Intent Stub

73
00:02:54,680 --> 00:02:58,044
和 Intent Verification 以及我们如何实现它们

74
00:02:58,044 --> 00:03:00,210
我想让你完成下面的拖放

75
00:03:00,210 --> 00:03:02,879
小测试 来正确匹配特点

76
00:03:02,879 --> 00:03:05,609
与关联的 Intent 测试类型

