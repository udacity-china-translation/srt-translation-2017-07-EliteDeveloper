1
00:00:00,469 --> 00:00:02,508
现在你已有了一个 Firebase 项目

2
00:00:02,508 --> 00:00:04,309
并将你的应用连接到了 Firebase

3
00:00:04,309 --> 00:00:07,068
你可以发送第一条云消息了

4
00:00:07,070 --> 00:00:10,609
现在 我们可以像这样可视化 Firebase 和我们的应用

5
00:00:10,609 --> 00:00:12,500
由于我们只使用 FCM

6
00:00:12,500 --> 00:00:16,878
我将称这个服务器为 FCM 服务器 而非 Firebase 服务器

7
00:00:16,879 --> 00:00:18,739
随着我们添加更多的功能

8
00:00:18,739 --> 00:00:20,588
这个图会更加复杂

9
00:00:20,588 --> 00:00:22,129
但现在我们只检查一下

10
00:00:22,129 --> 00:00:24,500
是否可以向运行该应用的所有手机发送一条

11
00:00:24,500 --> 00:00:25,832
简单的消息

12
00:00:25,832 --> 00:00:27,500
实际上 你不需要设置任何其他东西

13
00:00:27,500 --> 00:00:29,570
便可以这样做

14
00:00:29,570 --> 00:00:32,810
记住 FCM 消息可以让手机做任何事

15
00:00:32,810 --> 00:00:36,740
例如 FCM 消息可以包含聊天消息

16
00:00:36,740 --> 00:00:40,280
并且因此导致将新聊天添加到聊天屏幕

17
00:00:40,280 --> 00:00:43,370
或者它可能是一条消息 告知你收到了一封新的电子邮件

18
00:00:43,368 --> 00:00:44,988
并使你的手机触发任务

19
00:00:44,990 --> 00:00:47,270
下载所有新的电子邮件

20
00:00:47,270 --> 00:00:50,720
或者它可能是一条消息 告知你收到了一封新的电子邮件

21
00:00:50,719 --> 00:00:53,390
这会产生一个任务 触发你的手机下载

22
00:00:53,390 --> 00:00:55,103
所有这些新的电子邮件

23
00:00:55,103 --> 00:00:56,768
不过在大多数情况下 无论是

24
00:00:56,770 --> 00:00:58,790
收到新的电子邮件还是新的聊天消息

25
00:00:58,789 --> 00:01:01,518
通常都会出现通知

26
00:01:01,520 --> 00:01:04,099
此通知通常会打开应用

27
00:01:04,099 --> 00:01:06,799
而在发出通知的同时

28
00:01:06,799 --> 00:01:08,359
会有新的聊天

29
00:01:08,358 --> 00:01:10,640
添加到聊天数据库中 或触发

30
00:01:10,640 --> 00:01:12,349
完整的电子邮件同步

31
00:01:12,349 --> 00:01:14,733
通知是一种简单和常见的可视化方式

32
00:01:14,733 --> 00:01:16,399
可以告诉用户他们的手机上

33
00:01:16,400 --> 00:01:18,109
刚刚发生了什么

34
00:01:18,108 --> 00:01:19,488
记住这一点后 我们看看

35
00:01:19,489 --> 00:01:20,947
在设置好 FCM 后 我们可以

36
00:01:20,947 --> 00:01:23,088
在 Firebase 中做什么

37
00:01:23,090 --> 00:01:25,460
看着控制台 你会在左侧发现

38
00:01:25,459 --> 00:01:28,141
我提到过的一堆功能

39
00:01:28,141 --> 00:01:29,599
而你唯一关心的一个是

40
00:01:29,599 --> 00:01:33,618
通知 它就在 Grow 标题下

41
00:01:33,620 --> 00:01:36,350
我承认 这个名字令人困惑

42
00:01:36,349 --> 00:01:39,349
因为标题中没有 FCM

43
00:01:39,349 --> 00:01:41,030
但是 由于发出通知是

44
00:01:41,030 --> 00:01:43,159
FCM 的常见用例

45
00:01:43,159 --> 00:01:44,929
Firebase 控制台包含一个简单的方法

46
00:01:44,930 --> 00:01:47,450
它能发送一条 FCM 消息来本地

47
00:01:47,450 --> 00:01:48,980
在手机上触发通知

48
00:01:48,980 --> 00:01:51,650
如果我点击这里 你会看到这个

49
00:01:51,650 --> 00:01:54,200
关于发送第一条消息的屏幕

50
00:01:54,200 --> 00:01:57,109
我将直接点击“发送您的第一条消息”(Send Your First Message)

51
00:01:57,108 --> 00:02:01,268
那么在消息文本中 我只输入“Hello world”

52
00:02:01,269 --> 00:02:05,239
在发送日期上我要选择“现在发送”(Send Now)

53
00:02:05,239 --> 00:02:08,319
对于收件人 我将选择我的应用

54
00:02:08,318 --> 00:02:12,378
所以我到这里 选择 Squawker 应用

55
00:02:12,378 --> 00:02:15,408
这会向下载了 Squawker 的每个人发送

56
00:02:15,408 --> 00:02:18,108
一条 Hello World 通知消息

57
00:02:18,110 --> 00:02:19,970
需要注意的一点是

58
00:02:19,968 --> 00:02:22,668
你从 Firebase 控制台使用 FCM 发送的通知

59
00:02:22,669 --> 00:02:25,669
将仅当你的应用在后台时才会出现

60
00:02:25,669 --> 00:02:27,500
而在前台时不会

61
00:02:27,500 --> 00:02:29,840
我重复一遍 只有当你的应用在后台时

62
00:02:29,840 --> 00:02:31,590
它们才会出现

63
00:02:31,590 --> 00:02:33,408
所以现在打开我的应用

64
00:02:33,408 --> 00:02:36,228
我要将它放在后台

65
00:02:36,229 --> 00:02:39,139
另外注意 如果你的网络连接较慢或

66
00:02:39,139 --> 00:02:40,879
不稳定 则可能需要一点时间

67
00:02:40,878 --> 00:02:43,198
才能收到消息

68
00:02:43,199 --> 00:02:47,036
好的 现在我要到下面这里发送消息

69
00:02:47,037 --> 00:02:48,620
可以看到 我立即

70
00:02:48,620 --> 00:02:50,270
收到了通知

71
00:02:50,270 --> 00:02:54,120
如果我拉下来看看 可以看到它说 Hello world

72
00:02:54,120 --> 00:02:57,426
而如果我点击它 则会启动 Squawker

73
00:02:57,425 --> 00:02:59,299
对于使用该应用的所有人都是一样

74
00:02:59,300 --> 00:03:01,170
只要应用在后台即可

75
00:03:01,169 --> 00:03:04,899
无论我只是这里的一名用户还是上百名用户

