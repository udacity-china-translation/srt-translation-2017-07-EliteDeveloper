1
00:00:00,530 --> 00:00:02,270
那么你已经看过如何向 Activity

2
00:00:02,270 --> 00:00:04,490
添加新的Fragment

3
00:00:04,490 --> 00:00:07,580
现在我们来挨行看看这些代码的作用

4
00:00:07,580 --> 00:00:10,580
在 AndroidMeActivity 中的 onCreate

5
00:00:10,580 --> 00:00:13,280
我们调用了 getSupportFragmentManager

6
00:00:13,278 --> 00:00:17,689
这会使我们获得一个使用支持库 API 的 FragmentManager

7
00:00:17,690 --> 00:00:20,359
此管理器负责启动和完成

8
00:00:20,359 --> 00:00:22,070
Fragment事务

9
00:00:22,070 --> 00:00:25,219
使用此管理器 你可以调用 beginTransaction

10
00:00:25,219 --> 00:00:27,528
来启动一个新的Fragment事务

11
00:00:27,530 --> 00:00:30,050
接下来 你要决定采取什么操作

12
00:00:30,050 --> 00:00:32,658
add 调用可以添加Fragment并将其

13
00:00:32,658 --> 00:00:34,588
嵌入到 HostActivity 中

14
00:00:34,590 --> 00:00:37,520
replace 调用可以通过关联的容器

15
00:00:37,520 --> 00:00:39,662
替换现有的Fragment

16
00:00:39,661 --> 00:00:41,118
我们把它改回 add 

17
00:00:41,118 --> 00:00:43,750
因为我们要将它嵌入到此 Activity 中

18
00:00:43,750 --> 00:00:45,679
add（添加）和 replace（替换）将是我们在此应用中

19
00:00:45,679 --> 00:00:47,520
使用的两个主要类型的操作

20
00:00:47,520 --> 00:00:49,280
但是你可以通过在同一个Fragment事务中

21
00:00:49,280 --> 00:00:50,929
进行多个调用 来执行多个行为

22
00:00:50,929 --> 00:00:54,500
如一系列的添加、替换

23
00:00:54,500 --> 00:00:55,716
或删除

24
00:00:55,716 --> 00:00:57,798
然后当你准备好完成事务时

25
00:00:57,798 --> 00:00:59,570
你必须调用 commit

26
00:00:59,570 --> 00:01:01,759
要添加其他两个身体部位Fragment

27
00:01:01,759 --> 00:01:04,280
你要在我们想显示身体部分的 

28
00:01:04,280 --> 00:01:07,340
AndroidMeActivity 布局文件中

29
00:01:07,340 --> 00:01:10,340
创建两个与头部容器相同大小的容器

30
00:01:10,340 --> 00:01:12,799
所以你要创建另外两个和这个一样的容器

31
00:01:12,799 --> 00:01:15,049
并分别给它们描述性 ID

32
00:01:15,049 --> 00:01:18,049
body_container 和 leg_container.

33
00:01:18,049 --> 00:01:20,359
然后回到我们的 AndroidMeActivity 代码

34
00:01:20,358 --> 00:01:22,699
你要为每个身体和腿部部位

35
00:01:22,700 --> 00:01:24,891
创建新的身体部位Fragment

36
00:01:24,891 --> 00:01:27,349
实际上 这部分的代码我要留给你

37
00:01:27,349 --> 00:01:29,099
因为它与我们编写的显示头部Fragment的

38
00:01:29,099 --> 00:01:31,019
代码非常相似

39
00:01:31,019 --> 00:01:34,280
接下来 我们来看看如何更改显示的图像

40
00:01:34,280 --> 00:01:36,560
现在 在 BodyPartFragment 类中

41
00:01:36,560 --> 00:01:38,960
我们将图像资源设置为 ID 列表中 

42
00:01:38,959 --> 00:01:40,759
的第一个头部图像

43
00:01:40,760 --> 00:01:42,859
但实际上我想要能够动态地将它设置为

44
00:01:42,858 --> 00:01:45,227
我想显示的任何图像

45
00:01:45,227 --> 00:01:47,268
无论是在列表中部的图像

46
00:01:47,269 --> 00:01:49,489
还是身体或腿部的图像

47
00:01:49,489 --> 00:01:51,569
那我如何做到呢？

48
00:01:51,569 --> 00:01:54,079
那么 与其硬编码图像列表

49
00:01:54,078 --> 00:01:56,358
和显示的索引 我可以将

50
00:01:56,358 --> 00:01:59,780
这些信息存储在 BodyPartFragment 类中

51
00:01:59,780 --> 00:02:03,340
我只需创建变量来存储该信息

52
00:02:03,340 --> 00:02:06,290
我要存储图像 ID 的列表和

53
00:02:06,290 --> 00:02:08,330
要显示的列表的索引

54
00:02:08,330 --> 00:02:10,100
我要将它们存储在两个类变量中

55
00:02:10,098 --> 00:02:14,688
并将它们定义为一个名为 mImageID 的列表和一个名为 mListIndex

56
00:02:14,688 --> 00:02:17,180
的 int 变量

57
00:02:17,180 --> 00:02:19,550
然后我还需要定义 setter 方法

58
00:02:19,550 --> 00:02:21,950
这些方法可以让我在创建Fragment后设置这些变量

59
00:02:21,949 --> 00:02:24,319
的初始值

60
00:02:24,318 --> 00:02:28,458
所以我要创建公有方法 setImageIDs 和 setListIndex

61
00:02:28,460 --> 00:02:30,950
它们将要使用的图像列表

62
00:02:30,949 --> 00:02:32,780
以及决定列表中要显示的图像 ID 的索引

63
00:02:32,780 --> 00:02:34,759
作为输入

64
00:02:34,758 --> 00:02:37,608
我要将它们设置为内部变量

65
00:02:37,610 --> 00:02:41,030
然后我将在 onCreateView 中更新我的图像资源代码

66
00:02:41,030 --> 00:02:43,848
我要删除这个硬编码的图像资源

67
00:02:43,848 --> 00:02:46,518
然后添加一行代码 检查是否设置了

68
00:02:46,520 --> 00:02:47,840
图像 ID 列表

69
00:02:47,840 --> 00:02:51,408
如果没有 则记录一条消息 表示列表为 null

70
00:02:51,408 --> 00:02:54,650
在这个类的顶部 我创建一个日志记录标记

71
00:02:54,650 --> 00:02:56,770
如果图像 ID 的列表为 null

72
00:02:56,770 --> 00:02:59,090
我会创建一条日志消息说明此情况

73
00:02:59,090 --> 00:03:01,770
如果列表不为 null 那么我不是将图像资源

74
00:03:01,770 --> 00:03:03,700
设置为第一个头部图像

75
00:03:03,699 --> 00:03:06,588
而是设为 ID 位于图像 ID 列表中


76
00:03:06,590 --> 00:03:09,468
所需列表索引的图像

77
00:03:09,468 --> 00:03:11,900
最后 我们实际需要在我们的 Activity代码中

78
00:03:11,900 --> 00:03:13,349
使用这些 setter 方法

79
00:03:13,348 --> 00:03:15,590
那么返回 AndroidMeActivity

80
00:03:15,590 --> 00:03:18,210
其余的事务代码将保持不变

81
00:03:18,210 --> 00:03:19,909
我们来看看它是什么样的

82
00:03:19,908 --> 00:03:22,459
现在我们看到显示了不同的头部图像

83
00:03:22,460 --> 00:03:24,980
接下来 你的工作就是做同样的事情--

84
00:03:24,979 --> 00:03:27,769
为每个身体部位Fragment类定义和设置

85
00:03:27,770 --> 00:03:28,800
变量

86
00:03:28,800 --> 00:03:31,892
这也包括显示身体和腿部图像

87
00:03:31,890 --> 00:03:33,348
练习结束后 你将

88
00:03:33,348 --> 00:03:36,758
拥有一个完整的自定义 Android 身体图像

