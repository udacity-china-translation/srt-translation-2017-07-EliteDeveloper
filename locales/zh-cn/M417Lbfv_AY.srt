1
00:00:00,000 --> 00:00:01,070
哇哦！

2
00:00:01,070 --> 00:00:02,799
你已经完成了 Squawker

3
00:00:02,798 --> 00:00:04,639
在本课中 你学到了很多东西

4
00:00:04,639 --> 00:00:07,618
首先 你为自己的应用设置了一个 Firebase 帐户

5
00:00:07,620 --> 00:00:10,698
其次 你看到了如何从 Firebase 控制台

6
00:00:10,698 --> 00:00:12,500
发送 FCM 通知消息

7
00:00:12,500 --> 00:00:15,650
然后 你向该消息添加了一点额外数据

8
00:00:15,650 --> 00:00:17,330
并从 intent 获得了它

9
00:00:17,329 --> 00:00:19,789
之后 你为应用生成了一个

10
00:00:19,789 --> 00:00:21,230
注册实例令牌

11
00:00:21,230 --> 00:00:23,570
你使用该令牌 从服务器收到了

12
00:00:23,570 --> 00:00:24,690
一条数据消息

13
00:00:24,690 --> 00:00:28,250
最后 你学会了如何订阅 FCM 话题

14
00:00:28,250 --> 00:00:30,948
那么 由于实现 FCM 的一部分完全

15
00:00:30,949 --> 00:00:32,929
涉及编写服务器代码 有很多东西

16
00:00:32,929 --> 00:00:34,189
我没讲到

17
00:00:34,189 --> 00:00:37,219
这包括如何为 FCM 服务器编写

18
00:00:37,219 --> 00:00:38,179
服务器代码

19
00:00:38,179 --> 00:00:41,570
如何管理服务器上的注册令牌或组

20
00:00:41,570 --> 00:00:43,759
如何处理上游消息

21
00:00:43,759 --> 00:00:45,439
到目前为止 你所学的一切

22
00:00:45,439 --> 00:00:47,719
都视为下游消息

23
00:00:47,719 --> 00:00:49,280
上游消息是你向 FCM

24
00:00:49,280 --> 00:00:52,850
发送消息 以发送给其他设备

25
00:00:52,850 --> 00:00:55,579
另外还有一些其他消息属性我未讲到

26
00:00:55,579 --> 00:00:57,978
这些其他属性包括消息的

27
00:00:57,978 --> 00:00:59,868
寿命 这基本上是在设备脱机时

28
00:00:59,868 --> 00:01:02,780
FCM 将持续重复 ping 你的设备

29
00:01:02,780 --> 00:01:04,250
的时间长度

30
00:01:04,250 --> 00:01:06,379
还有消息的优先级 它决定了

31
00:01:06,379 --> 00:01:09,228
当手机处于 doze 模式时是否唤醒手机

32
00:01:09,230 --> 00:01:11,890
以及消息是否可折叠

33
00:01:11,890 --> 00:01:15,890
在收到新消息时 可折叠消息将被替换

34
00:01:15,890 --> 00:01:17,870
例如 假设你的手机关闭了

35
00:01:17,870 --> 00:01:19,810
每次当你收到新的电子邮件时

36
00:01:19,810 --> 00:01:23,750
FCM 会告诉你的手机与电子邮件服务器进行同步

37
00:01:23,750 --> 00:01:25,400
如果你的手机已经关闭了一周

38
00:01:25,400 --> 00:01:28,219
那么在重新开机时 它不会告诉你

39
00:01:28,218 --> 00:01:29,839
将手机同步 100 次

40
00:01:29,840 --> 00:01:32,600
而是只告诉你同步一次

41
00:01:32,599 --> 00:01:35,509
我也没有介绍如何将设备与服务器同步

42
00:01:35,510 --> 00:01:38,210
在 Squawker 中 你只需在收到 FCM 消息时

43
00:01:38,209 --> 00:01:41,058
直接将消息保存到数据库中

44
00:01:41,060 --> 00:01:42,799
但是根据你的服务器的

45
00:01:42,799 --> 00:01:45,230
设置 每次从 Squawker 收到消息时

46
00:01:45,230 --> 00:01:47,299
你都可以进行完整的数据库同步

47
00:01:47,299 --> 00:01:49,429
或者你可以开始关注新的讲师

48
00:01:49,430 --> 00:01:51,452
这将触发新的数据库同步

49
00:01:51,450 --> 00:01:52,908
以便你获得任何

50
00:01:52,909 --> 00:01:54,319
可能错过了的消息

51
00:01:54,319 --> 00:01:57,679
因为同步和缓存与 FCM 没有直接关系

52
00:01:57,680 --> 00:01:59,540
所以我在这里没有深入介绍

53
00:01:59,540 --> 00:02:01,190
但我在注释中提供了

54
00:02:01,188 --> 00:02:03,438
大量关于所有这些话题的文档

55
00:02:03,438 --> 00:02:05,279
方便你详细了解

56
00:02:05,280 --> 00:02:07,579
现在 就你知道的知识 你已经能掌握

57
00:02:07,578 --> 00:02:09,049
FCM 提供的功能了

58
00:02:09,050 --> 00:02:11,210
它可以帮助你打造省电的应用

59
00:02:11,210 --> 00:02:14,159
实时接收通知和数据消息

60
00:02:14,158 --> 00:02:17,438
这将使你的生活大有不同

